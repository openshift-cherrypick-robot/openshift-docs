:_content-type: ASSEMBLY
[id="getting-started-rhacs-cloud-ocp"]
= Getting started with RHACS Cloud Service
include::modules/common-attributes.adoc[]
:context: getting-started-rhacs-cloud-ocp

toc::[]

[role="_abstract"]

{rh-rhacscs-first} provides security services for your {osp} and Kubernetes clusters. See xref:../installing/acs-installation-platforms.adoc#acs-installation-platforms[Supported platforms and installation methods] for more information on supported platforms for secured clusters.

.Prerequisites

* Ensure that you can access the *Advanced Cluster Security* menu option from the {cloud-console}.
+
[NOTE]
====
To access the {product-title-managed-short} console, you need your Red Hat Single Sign-On (SSO) credentials, or credentials for another identity provider if that has been configured. See xref:../cloud_service/getting-started-rhacs-cloud-ocp.adoc#default-access-acs-console[Default access to the ACS console].
====

[id="installation-overview-acs-cloud"]
== High-level overview of installation steps

The following sections provide an overview of installation steps and links to the relevant documentation.

[id="securing-rh-cloud-clusters"]
=== Securing {osp} clusters

To secure {osp} clusters by using the Operator, perform the following steps:

. Verify that the clusters you want to secure meet the xref:../cloud_service/acscs-default-requirements.adoc#acscs-default-requirements[requirements].
. In the {cloud-console}, xref:../cloud_service/installing_cloud_ocp/cloud-create-instance-ocp.adoc#cloud-create-instance-ocp[create an *ACS Instance*].
. On each {osp} cluster you want to secure, xref:../cloud_service/installing_cloud_ocp/cloud-ocp-create-project.adoc#cloud-ocp-create-project[create a project named `stackrox`]. This project will contain the resources for {product-title-managed-short} secured clusters.
. In the ACS Console, xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-generate.adoc#init-bundle-cloud-ocp-generate[create an init bundle]. The init bundle contains secrets that allow communication between {product-title-managed-short} secured clusters and the ACS Console.
. On each {osp} cluster, xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-apply#init-bundle-cloud-ocp-apply[apply the init bundle] by using it to create resources.
. On each {osp} cluster, xref:../cloud_service/installing_cloud_ocp/cloud-install-operator#cloud-install-operator[install the {product-title-short} Operator].
. On each {osp} cluster, xref:../cloud_service/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc#installing-sc-operator-cloud-ocp[install secured cluster resources in the `stackrox` project] by using the Operator.
. xref:../cloud_service/installing_cloud_ocp/verify-installation-cloud-ocp.adoc#verify-installation-cloud-ocp[Verify installation] by ensuring that your secured clusters can communicate with the ACS instance.

To secure {osp} clusters by using Helm charts or the `roxctl` CLI, perform the following steps:

. Verify that the clusters you want to secure meet the xref:../cloud_service/acscs-default-requirements.adoc#acscs-default-requirements[requirements].
. In the {cloud-console}, xref:../cloud_service/installing_cloud_ocp/cloud-create-instance-ocp.adoc#cloud-create-instance-ocp[create an *ACS Instance*].
. On each {osp} cluster you want to secure, xref:../cloud_service/installing_cloud_ocp/cloud-ocp-create-project.adoc#cloud-ocp-create-project[create a project named `stackrox`]. This project will contain the resources for {product-title-managed-short} secured clusters.
. In the ACS Console, xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-generate.adoc#init-bundle-cloud-ocp-generate[create an init bundle]. The init bundle contains secrets that allow communication between {product-title-managed-short} secured clusters and the ACS Console.
. On each {osp} cluster, xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-apply#init-bundle-cloud-ocp-apply[apply the init bundle] by using it to create resources.
. On each {osp} cluster, install secured cluster resources in the `stackrox` project by using xref:../cloud_service/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc#installing-sc-helm-cloud-ocp[Helm charts] or by using the xref:../cloud_service/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc#installing-sc-roxctl-cloud-ocp[`roxctl` CLI].
. xref:../cloud_service/installing_cloud_ocp/verify-installation-cloud-ocp.adoc#verify-installation-cloud-ocp[Verify installation] by ensuring that your secured clusters can communicate with the ACS instance.

[id="securing-kubernetes-clusters"]
=== Securing Kubernetes clusters

To secure Kubernetes clusters, perform the following steps:

. Verify that the clusters you want to secure meet the xref:../cloud_service/acscs-default-requirements.adoc#acscs-default-requirements[requirements].
. In the {cloud-console}, xref:../cloud_service/installing_cloud_other/cloud-create-instance-other.adoc#cloud-create-instance-other[create an *ACS Instance*].
. In the ACS Console, xref:../cloud_service/installing_cloud_other/init-bundle-cloud-other-generate.adoc#init-bundle-cloud-other-generate[create an init bundle]. The init bundle contains secrets that allow communication between {product-title-managed-short} secured clusters and the ACS Console.
. On each Kubernetes cluster, xref:../cloud_service/installing_cloud_other/init-bundle-cloud-other-apply#init-bundle-cloud-other-apply[apply the init bundle] by using it to create resources.
. On each Kubernetes cluster, xref:../cloud_service/installing_cloud_other/install-secured-cluster-cloud-other.adoc#install-secured-cluster-cloud-other[install secured cluster resources] by using Helm charts or the `roxctl` CLI.
. xref:../cloud_service/installing_cloud_other/verify-installation-cloud-other.adoc#verify-installation-cloud-other[Verify installation] by ensuring that your secured clusters can communicate with the ACS instance.

[id="default-access-acs-console"]
== Default access to the ACS Console

By default, the authentication mechanism available to users is authentication by using Red Hat Single Sign-On (SSO).
You cannot delete or change the Red Hat SSO authentication provider.
However, you can change the minimum access role and add additional rules, or add another identity provider.

[NOTE]
====
To learn how authentication providers work in ACS, see xref:../operating/manage-user-access/understanding-authentication-providers.adoc[Understanding authentication providers].
====

A dedicated OIDC client of `sso.redhat.com` is created for each ACS Console. All OIDC clients share the same `sso.redhat.com` realm.
Claims from the token issued by `sso.redhat.com` are mapped to an ACS-issued token as follows:

* `realm_access.roles` to `groups`
* `org_id` to `rh_org_id`
* `is_org_admin` to `rh_is_org_admin`
* `sub` to `userid`

The built-in Red Hat SSO authentication provider has the required attribute `rh_org_id` set to the organization ID assigned to account of the user who created the {product-title-managed-short} instance.
This is the ID of the organizational account the user is a part of. This can be thought of as the "tenant" the user is under and owned by.
Only users with the same organizational account can access the ACS console by using the Red Hat SSO authentication provider.

[NOTE]
====
To gain more control over access to your ACS Console, configure another identity provider instead of relying on the Red Hat SSO authentication provider. For more information, see xref:../operating/manage-user-access/understanding-authentication-providers.adoc#authentication-provider-structure[Understanding authentication providers]. To configure the other authentication provider to be the first authentication option on the login page, its name should be lexicographically smaller than `Red Hat SSO`.
====

The minimum access role is set to `None`. Assigning a different value to this field gives access to the {product-title-managed-short} instance to all users with the same organizational account.

Other rules that are set up in the built-in Red Hat SSO authentication provider include the following:

* Rule mapping your `userid` to `Admin`
* Rules mapping administrators of the organization to `Admin`

You can add more rules to grant access to the ACS Console to someone else with the same organizational account. For example, you can use `email` as a key.
